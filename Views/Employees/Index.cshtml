@model List<Lab7.Models.DataAccess.Employee>

<h2>Index</h2>

<p>
    <a asp-action="Create">Create New</a>
</p>
@if (Model.Count == 0)
{
    <p style="color:red">Currently no employee exits in the system</p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>
                    <label asp-for="@Model[0].Name"></label>
                </th>
                <th>
                    <label asp-for="@Model[0].UserName"></label>
                </th>
                <th>
                    <label asp-for="@Model[0].Roles"></label>
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UserName)
                    </td>
                    <td>
                      @{
                            string roles = "";
                            foreach (Lab7.Models.DataAccess.Role r in item.Roles)
                            {
                                roles += $", {r.Role1}";
                            }
                            if (roles.Length > 0)
                            {
                                roles = roles.Substring(2);
                                <span>@roles</span>
                            }
                        }
                    </td>
                    <td>
                        <a asp-action="Edit" asp-route-id="@item.Id">Edit</a> |

                        <a asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                    </td>
                </tr>
            }



        </tbody>
    </table>
}

